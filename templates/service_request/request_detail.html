{% extends "_base.html" %}
{% block title %}Service Request Details | BAZNAS ITSM{% endblock title %}

{% block content %}
<div class="container my-5">
    <h2 class="text-center mb-4">Service Request Details</h2>

    <div class="card">
        <div class="card-header">
            <h5 class="mb-0">Ticket Information</h5>
        </div>
        <div class="card-body">
            <table class="table table-striped table-bordered">
                <tbody>
                    <tr>
                        <th>Ticket Code</th>
                        <td>{{ service_request.ticket_code }}</td>
                    </tr>
                    <tr>
                        <th>Category</th>
                        <td>{{ service_request.asset.category.name }}</td>
                    </tr>
                    <tr>
                        <th>Asset</th>
                        <td>{{ service_request.asset.name }}</td>
                    </tr>
                    <tr>
                        <th>PIC</th>
                        <td>{{ service_request.asset.pic.username }}</td>
                    </tr>
                    <tr>
                        <th>Status</th>
                        <td>{{ service_request.get_status_display }}</td>
                    </tr>
                    <tr>
                        <th>Created At</th>
                        <td>{{ service_request.created_at|date:"Y-m-d H:i:s" }}</td>
                    </tr>
                    <tr>
                        <th>Approved At</th>
                        <td>
                            {% if service_request.approved_at %}
                                {{ service_request.approved_at|date:"Y-m-d H:i:s" }}
                            {% else %}
                                Not Approved
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <th>Rejected At</th>
                        <td>
                            {% if service_request.rejected_at %}
                                {{ service_request.rejected_at|date:"Y-m-d H:i:s" }}
                            {% else %}
                                Not Rejected
                            {% endif %}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <h4 class="mt-4">Form Data:</h4>
    <div class="card">
        <div class="card-body">
            <ul class="list-group">
                {% for key, value in service_request.form_data.items %}
                    <li class="list-group-item">
                        <strong>{{ key }}:</strong> {{ value }}
                    </li>
                {% empty %}
                    <li class="list-group-item">No form data available.</li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>
{% endblock content %}
